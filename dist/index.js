"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var RxDB=require("rxdb"),mobx=require("mobx"),consola=_interopDefault(require("consola")),Subscriber=_interopDefault(require("rxcollection-subscriber")),extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function __decorate(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;0<=s;s--)(n=e[s])&&(a=(o<3?n(a):3<o?n(t,r,a):n(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a}function __awaiter(o,a,s,u){return new(s=s||Promise)(function(e,t){function r(e){try{n(u.next(e))}catch(e){t(e)}}function i(e){try{n(u.throw(e))}catch(e){t(e)}}function n(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,i)}n((u=u.apply(o,a||[])).next())})}function __generator(r,i){var n,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],o=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,n++)i[n]=o[a];return i}var strings,numbers,arrays,objects,env=String(process.env.NODE_ENV),version=require("../package.json").version,build={db:{name:"Lodger/",adapter:"memory",password:"l0dg3rp4$$",ignoreDuplicate:Boolean("test"===env)}},taxonomii={defaults:{criteriu:{limit:25,index:0,sort:{},find:null}},asociatii:{criteriu:{limit:100}}},config={version:version,taxonomii:taxonomii,build:build},LodgerError=function(i){function n(e,t){var r;return t&&(e=String(e).replace("%%",'"'+JSON.stringify(t)+'"')),r=i.call(this,e)||this,Object.setPrototypeOf(r,n.prototype),r}return __extends(n,i),n}(Error);switch(env){default:RxDB.plugin(require("pouchdb-adapter-memory"));break;case"production":RxDB.plugin(require("pouchdb-adapter-leveldb"))}!function(e){e[e.search=0]="search",e[e.select=1]="select",e[e.string=2]="string",e[e.text=3]="text",e[e.textarea=4]="textarea"}(strings=strings||{}),function(e){e[e.date=0]="date",e[e.dateTime=1]="dateTime",e[e.number=2]="number"}(numbers=numbers||{}),function(e){e[e.array=0]="array",e[e.contactFields=1]="contactFields",e[e.contoare=2]="contoare",e[e.distribuire=3]="distribuire",e[e.furnizori=4]="furnizori",e[e.selApartamente=5]="selApartamente",e[e.servicii=6]="servicii",e[e.scari=7]="scari"}(arrays=arrays||{}),function(e){e[e.bani=0]="bani",e[e.object=1]="object",e[e.organizatie=2]="organizatie"}(objects=objects||{}),String.prototype.stripLeading$=function(){return 0!==this.indexOf("$")?String(this):String(this.replace("$","").trim().stripLeading$())},String.prototype.customSplit=function(){var e=this.split("/");return{what:e[0],mutation:e[1]}},String.prototype.slugify=function(){return this.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},String.prototype.toRxDBType=function(){var e=this.toString();return-1<Object.keys(strings).indexOf(e)?"string":-1<Object.keys(objects).indexOf(e)?"object":-1<Object.keys(numbers).indexOf(e)?"number":-1<Object.keys(arrays).indexOf(e)?"array":"string"},String.prototype.plural=function(){return String(this+"i")};var Errors,S={String:String},String$1=S.String,Field=function(){function e(e){var t=this;if(this.type="string",this.storage="db",this.value=function(){return t.default||void 0},e){var r=e.index,i=e.ref,n=e.indexRef,o=e.type,a=e.step,s=e.required,u=e.v,c=e.value;if(this.type=String$1(o||"").toRxDBType(),r&&(this.index=!0),i&&(this.ref=i,this.items={type:"string"},n&&(this.index=n)),void 0!==a){if("number"!==this.type)throw new LodgerError('Type must be "number" for .step');this.multipleOf=a}s&&(this.v=s&&u&&u.indexOf("required")<0?u:"required|"+u),this.default="function"==typeof e.default?e.default():e.default;var l=this.storage;c&&"function"==typeof c&&(this.value=c.bind({storage:l}))}}return Object.defineProperty(e.prototype,"rxSchema",{get:function(){var t=this,r={},i=["storage","value","default","v"];return Object.keys(this).forEach(function(e){void 0!==t[e]&&(-1<i.indexOf(e)||(r[e]=t[e]))}),r},enumerable:!0,configurable:!0}),e}();!function(e){e.missingProps="Missing properties on schema %%",e.propExists='Property "%%" already exists',e.idUndef="ID for field %% cannot be undefined",e.invalidField="Invalid field %% supplied"}(Errors=Errors||{});var Errors$1,Schema=function(){function e(e,t,r){var i=this;if(this.name=e,this.type="object",this.version=0,this.properties={},this.required=[],!t||!Object.keys(t).length)throw new LodgerError(Errors.missingFields,{name:e});Object.keys(t).map(function(e){return i.add(t[e].id||e,t[e])})}return e.prototype.add=function(e,t){if(!e)throw new LodgerError(Errors.idUndef,t);if(this.properties[e])throw new LodgerError(Errors.propExists,e);if(t&&!t.rxSchema)throw new LodgerError(Errors.invalidField,t);var r=t.rxSchema,i=t.v;if("db"===t.storage){var n=i&&-1<i.indexOf("required");this.properties[e]=r||{},n&&this.required.indexOf(e)<0&&this.required.push(e)}},Object.defineProperty(e.prototype,"ids",{get:function(){return Object.keys(this.properties)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexables",{get:function(){var t=this;return this.ids.filter(function(e){return t.properties[e].index})},enumerable:!0,configurable:!0}),e}();!function(e){e.invalidRequested="Invalid file requested: %%",e.invalidName="Invalid name supplied: %%",e.missingFields="Missing fields on form %%"}(Errors$1=Errors$1||{});var Errors$2,db,Form=function(){function e(e,t){var r=this;this.opts=t,this._onsubmit=[],this.$active=!1;var i=e||{name:"untitled",fields:{}},n=i.fields,o=i.name;this.name=o,this.fields=__assign({},n),this.plural=this.name.plural(),n&&Object.keys(n).map(function(e){r.fields[e]=new Field(n[e])}),!t||t.captureTimestamp&&(this.fields.createdAt=new Field({type:"dateTime",index:!0,excludeFrom:["addForm","editForm"],showInList:"secondary"}),this.fields.updatedAt=new Field({type:"dateTime",index:!0,excludeFrom:["addForm","editForm"],showInList:"secondary"}));this.schema=new Schema(o,this.fields),this.onsubmit=function(){}}return Object.defineProperty(e.prototype,"data",{get:function(){return Object.assign.apply(Object,__spreadArrays([{}],Object.keys(this.fields)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldsIds",{get:function(){return Object.keys(this.fields)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onsubmit",{set:function(e){this._onsubmit.push(e.bind(this))},enumerable:!0,configurable:!0}),e.prototype.value=function(r){var i=this,n={};return this.fieldsIds.forEach(function(e){var t=i.fields[e];"db"===t.storage&&(n[e]=t.value(r))}),n},e}();function notify(e){if(this&&"function"==typeof this.dispatch&&this.actions.notify)this.dispatch("notify",e);else{var t=e.type,r=e.text;if(consola[t](r),"error"===t)throw new Error(r)}}(Errors$2||(Errors$2={})).noDB="Please setup a DB first!";var Taxonomy=function(){function e(e,t,r){this.form=e,this.options=r,this.lastItems=[],Object.defineProperty(this,"collection",{enumerable:!1,writable:!1,value:t})}return Object.defineProperty(e.prototype,"last",{get:function(){return this.lastItems[0]},set:function(e){e?this.lastItems.unshift(e):this.lastItems.shift()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"db",{set:function(e){db=e},enumerable:!0,configurable:!0}),e.destroy=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return db?[4,db.destroy()]:[2];case 1:return e.sent(),[2]}})})},Object.defineProperty(e.prototype,"plural",{get:function(){return this.form.plural},enumerable:!0,configurable:!0}),e.init=function(d,f){return void 0===f&&(f={}),__awaiter(this,void 0,void 0,function(){var t,r,i,n,o,a,s,u,c,l;return __generator(this,function(e){switch(e.label){case 0:if(!db)throw new LodgerError(Errors$2.noDB);e.label=1;case 1:return e.trys.push([1,3,,4]),t=d.name,r=d.fields,i=d.methods,n=d.statics,o=f.timestamps,a=new Form({name:t,fields:r},{captureTimestamp:o}),s=a.schema,u={name:t,schema:s,methods:i,statics:n},[4,db.collection(u)];case 2:return c=e.sent(),[2,new this(a,c,f)];case 3:throw l=e.sent(),new LodgerError(l);case 4:return[2]}})})},Object.defineProperty(e.prototype,"name",{get:function(){return this.collection.name},enumerable:!0,configurable:!0}),e.prototype.trash=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.last===t&&(this.last=void 0),[4,this.collection.findOne(t).remove()];case 1:return[2,e.sent()]}})})},e.prototype.put=function(c){return __awaiter(this,void 0,void 0,function(){var t,r,i,n,o,a,s,u;return __generator(this,function(e){switch(e.label){case 0:if(!c||Object.keys(c).length<1)throw new LodgerError("Invalid doc supplied %%",{doc:c});t=c._id?"upsert":"insert",i=(r=this).name,(n=r.options)&&n.timestamps&&Object.assign(c,((u={})["insert"===t?"createdAt":"updatedAt"]=(new Date).getTime(),u)),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.collection[t](c)];case 2:return o=e.sent(),a=o._id,this.last=a,notify({type:"success",text:"["+t+"] "+i+"!"+(-1<["dev","test"].indexOf(env)?"("+a+")":"")}),[2,o];case 3:return s=e.sent(),notify({type:"error",text:String(s)}),[3,4];case 4:return[2]}})})},Object.defineProperty(e.prototype,"config",{get:function(){var e=config.taxonomii,t=e.defaults;return e[this.name]||t},enumerable:!0,configurable:!0}),__decorate([mobx.observable],e.prototype,"lastItems",void 0),__decorate([mobx.computed],e.prototype,"last",null),e}(),STaxonomy=function(t){function e(){var e=t.apply(this,arguments)||this;return e.subscribers={},e}return __extends(e,t),e.init=function(){return t.init.apply(this,arguments)},Object.defineProperty(e.prototype,"data",{get:function(){return this.subscribers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subscribed",{get:function(){return 0<Object.keys(this.subscribers).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultCriteria",{get:function(){return t.prototype.config.criteriu},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e,t){void 0===e&&(e="main"),this.subscribers[e]||(this.subscribers[e]=new Subscriber(this.collection,t))},e.prototype.unsubscribe=function(e){void 0===e&&(e="main");var t=this.subscribers[e];try{t.kill&&t.kill()}catch(e){}delete this.subscribers[e]},e.prototype.unsubscribeAll=function(){var t=this,e=this.subscribers;if(!e||!Object.keys(e).length)throw new LodgerError("no subs");Object.keys(e).forEach(function(e){t.unsubscribe(e)})},e}(Taxonomy),dynamicTargets={"Apartament.ts":Promise.resolve().then(function(){return Apartament}),"Asociatie.ts":Promise.resolve().then(function(){return Asociatie$1}),"Bloc.ts":Promise.resolve().then(function(){return Bloc}),"Cheltuiala.ts":Promise.resolve().then(function(){return Cheltuiala}),"Contor.ts":Promise.resolve().then(function(){return Contor}),"Factura.ts":Promise.resolve().then(function(){return Factura}),"Feedback.ts":Promise.resolve().then(function(){return Feedback}),"Furnizor.ts":Promise.resolve().then(function(){return Furnizor}),"Incasare.ts":Promise.resolve().then(function(){return Incasare}),"Serviciu.ts":Promise.resolve().then(function(){return Serviciu}),"Tranzactie.ts":Promise.resolve().then(function(){return Tranzactie}),"Utilizator.ts":Promise.resolve().then(function(){return Utilizator})},capitalize=function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)};function load(e){return e.map(function(e){var t=capitalize(e)+".ts";dynamicTargets[t]().then(function(){console.log("imported "+t)})})}!function(e){e[e.Apartament=0]="Apartament",e[e.Asociatie=1]="Asociatie",e[e.Bloc=2]="Bloc",e[e.Cheltuiala=3]="Cheltuiala",e[e.Contor=4]="Contor",e[e.Factura=5]="Factura",e[e.Furnizor=6]="Furnizor",e[e.Incasare=7]="Incasare",e[e.Serviciu=8]="Serviciu",e[e.Utilizator=9]="Utilizator"}(exports.Taxonomii||(exports.Taxonomii={}));var Forms,taxonomies=Object.keys(exports.Taxonomii).filter(function(e){return"number"==typeof exports.Taxonomii[e]});!function(e){e[e.Feedback=0]="Feedback",e[e.Financiar=1]="Financiar",e[e.Preferinte=2]="Preferinte"}(Forms=Forms||{}),function(e){e.missingDB="Missing database",e.invalidPluginDefinition="Invalid plugin definition",e.pluralsAlreadyDefined="Plurals are already defined, aborting",e.missingCoreDefinitions="Invalid Lodger build. Missing core definitions",e.invalidPreferenceIndex="Invalid preference index supplied",e.invalidPropertySupplied="Invalid property supplied",e.noPlural="Could not find plural definition for %%",e.missingData="Missing data %%",e.couldNotWriteFile="Cannot write file"}(exports.Errors||(exports.Errors={}));var plugins=[],Lodger=function(){function n(e,t){void 0===e&&(e=e),void 0===t&&(t=[]),this.plugins=t,Object.defineProperties(this,e)}return n.prototype.put=function(e,t){this[e].put(t)},n.prototype.subscribe=function(e,t,r){var i=this;void 0===r&&(r="main"),Object.keys(e).forEach(function(e){i.taxonomies[e].subscribe(r,t)})},n.build=function(i){return void 0===i&&(i=__assign({},config.build)),__awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(e){switch(e.label){case 0:return t=STaxonomy,[4,RxDB.create(i.db)];case 1:return t.db=e.sent(),[2,new n(load(taxonomies).map(function(t){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,STaxonomy.init(t)];case 1:return e.sent(),[2]}})})}),plugins)]}})})},n.use=function(e){if(!e||"object"!=typeof e)throw new LodgerError(exports.Errors.invalidPluginDefinition);e.name;plugins.push(e)},n.prototype.destroy=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.unsubscribeAll()];case 1:return e.sent(),[4,STaxonomy.destroy()];case 2:return e.sent(),[2]}})})},n.prototype.export=function(t,e,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.db.dump()];case 1:return e.sent(),t=t||require("os").homeDir+"/downloads/",[2]}})})},n.prototype.import=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},Object.defineProperty(n.prototype,"subscribedTaxes",{get:function(){return subscribedTaxes},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activeReferencesIds",{get:function(){var t=this.store.getters;return function(e){return assignRefIdsFromStore({references:e,getters:t})}},enumerable:!0,configurable:!0}),n}(),selectedApGetter="apartament/activeDoc",fields={nr:{type:"number",default:function(t){var e=t["bloc/activeDoc"].apartamente;return e&&e.length?e.map(function(e){return t.apartamente[e].nr}).sort(function(e,t){return Number(e)-Number(t)}).reverse()[0]+1:1},value:function(e){return e[selectedApGetter].nr},required:!0,index:!0,showInList:"secondary"},proprietar:{placeholder:"Ion Barbu",oninput:{transform:"capitalize"},showInList:"primary",v:"alpha_spaces|max:32",value:function(e){return e[selectedApGetter].proprietar}},suprafata:{type:"number",showInList:["details"],default:null,step:.01,value:function(e){return e[selectedApGetter].suprafata}},locatari:{index:!0,type:"number",showInList:["details"],default:2,min:0,max:10,value:function(e){return e[selectedApGetter].locatari}},camere:{type:"number",index:!0,showInList:["details"],default:2,max:12,min:1,value:function(e){return e[selectedApGetter].camere}},etaj:{type:"number",required:!0,default:function(e){return e["etaj/selectat"].etaj},value:function(e){return e[selectedApGetter].etaj}},blocId:{required:!0,default:function(e){return e["etaj/selectat"].bloc},value:function(e){return e[selectedApGetter].bloc}},asociatieId:{required:!0,default:function(e){return e["asociatie/activeDoc"]._id},value:function(e){return e["asociatie/activeDoc"]._id}},scara:{type:"number",required:!0,default:function(e){return e["etaj/selectat"].scara},value:function(e){return e[selectedApGetter].scara}},balanta:{type:"bani",default:null,required:!0,showInList:["details"],index:!0,value:function(e){return e[selectedApGetter].balanta}},contoare:{type:"contoare",showInList:["details"],value:function(e){return e[selectedApGetter].contoare}},incasari:{type:"array",ref:"incasari"},cheltuieli:{type:"array",ref:"cheltuieli"}},methods={incaseaza:function(r){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.balanta||(this.balanta=0),t=this.incasari||[],this.balanta+=r.suma,t.push(r._id),this.incasari=t,[4,this.save()];case 1:return e.sent(),[2]}})})}},Apartament=Object.freeze({__proto__:null,methods:methods,fields:fields}),fields$1={name:{required:!0,focus:!0,index:!0,showInList:"primary",value:function(e){return e.activeDoc.name},v:"max:32|min:3",oninput:{transform:"capitalize"}},organizatie:{type:"object",value:function(e){return e.activeDoc.organizatie}},balanta:{type:"number",value:function(e){return e.activeDoc.balanta},showInList:["details"]},incasari:{type:"array",ref:"incasari",value:function(e){return e.activeDoc.incasari},excludeFrom:["addForm","editForm"]},utilizatori:{type:"array",ref:"utilizatori",value:function(e){return e.activeDoc.utilizatori},excludeFrom:["addForm","editForm"]},servicii:{type:"array",ref:"servicii",value:function(e){return e.activeDoc.servicii},showInList:"secondary",excludeFrom:["addForm","editForm"]},furnizori:{type:"array",ref:"furnizori",value:function(e){return e.activeDoc.furnizori},excludeFrom:["addForm","editForm"]},preferinte:{value:function(e){return e.activeDoc.preferinte},type:"object",excludeFrom:["addForm","editForm"]}},methods$1={initBalanta:function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return void 0!==this.balanta?[2]:(this.balanta=t.balanta,[4,this.save()]);case 1:return e.sent(),[2]}})})},incaseaza:function(r){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.balanta||(this.balanta=0),t=this.incasari||[],this.balanta+=r.suma,t.push(r._id),this.incasari=t,[4,this.save()];case 1:return e.sent(),[2]}})})},toggle_serviciu:function(i){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(e){return i&&(t=this.servicii,-1<(r=(t=t||[]).indexOf(i))?t.splice(r,1):t.push(i),this.update({$set:{servicii:t}})),[2]})})},UPDATEAZA:function(r){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){switch(e.label){case 0:return Object.keys(r).forEach(function(e){t[e]=r[e]}),[4,this.save()];case 1:return e.sent(),[2]}})})}},statics={selected:function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.findOne(t).exec()];case 1:return[2,e.sent()]}})})}},setari={date:{fields:[{type:"button",click:"exportDb"},{type:"button",click:"importDb"}]},periculoase:{order:-1,avansat:!0,fields:[{type:"button",click:"sterge"}]}},Asociatie={fields:fields$1,methods:methods$1,statics:statics,setari:setari},Asociatie$1=Object.freeze({__proto__:null,default:Asociatie}),fields$2={name:{placeholder:"ex. M11, COCOR-2, A3...",oninput:{transform:"uppercase:all"},type:"text",required:!0,showInList:"primary",index:!0,v:"min:1|max:20",focus:!0,value:function(e){return e.activeDoc.name}},scari:{type:"scari",default:[{id:1,etaje:4,lift:!1,mansarda:!1}],value:function(e){return e.activeDoc.scari}},adresa:{type:"textarea",value:function(e){return e.activeDoc.adresa}},asociatieId:{value:function(e){return e.g.asociatieId}}},Bloc=Object.freeze({__proto__:null,fields:fields$2}),fields$3={asociatieId:{ref:"asociatii",required:!0,index:!0},dataScadenta:{type:"dateTime"},catre:{type:"string",ref:"furnizori"},facturi:{type:"search",ref:"facturi"},suma:{type:"bani",required:!0,index:!0,showInList:"secondary"},distribuire:{type:"distribuire"},apartamenteEligibile:{type:"selApartamente",options:function(e){return e.getters["asociatie/apartamente"]}}},Cheltuiala=Object.freeze({__proto__:null,fields:fields$3}),fields$4={tip:{}},Contor=Object.freeze({__proto__:null,fields:fields$4}),fields$5={suma:{type:"bani",showInList:"primary",index:!0,required:!0,label:"defaults.sum"},nrFactura:{type:"number",default:1,index:!0,value:function(e){return Number(e.nrUltimaChitanta||0)+1}},dataScadenta:{type:"date",showInList:"secondary"},furnizorId:{required:!0,type:"search",ref:"furnizori"},asociatieId:{required:!0,index:!0,value:function(e){return e["asociatie/active"]||e["asociatie/selected"]}}},Factura=Object.freeze({__proto__:null,fields:fields$5}),fields$6={subiect:{required:!0},tip:{type:"select",options:["bug","enhacement","feature","other"],default:"bug",required:!0},mesaj:{required:!0,type:"textarea",placeholder:"PÄƒrerea / Sugestia / Critica ta"}},Feedback=Object.freeze({__proto__:null,fields:fields$6}),fields$7={name:{required:!0,showInList:"primary",index:!0},servicii:{type:"servicii",required:!0,value:function(e){return e.activeDoc.servicii},ref:"serviciu"},organizatie:{type:"organizatie"}},Furnizor=Object.freeze({__proto__:null,fields:fields$7}),fields$8={suma:{type:"bani",showInList:"primary",index:!0,required:!0,label:"defaults.sum"},nrChitanta:{type:"number",default:1,index:!0,value:function(e){return(e.activeDoc.nrUltimaChitanta||0)+1}},apartamentId:{required:!0,type:"search",ref:"apartamente"},blocId:{required:!0,index:!0,value:function(e){return e["bloc/selected"].id}},asociatieId:{required:!0,index:!0,value:function(e){return e["asociatie/selected"].id}}},Incasare=Object.freeze({__proto__:null,fields:fields$8}),fields$9={asociatieId:{excludeFrom:["db"]},denumire:{required:!0,showInList:"primary",primary:!0,index:!0},furnizori:{type:"array",excludeFrom:["addForm","editForm"]},contoare:{type:"contoare"}},predefinite=["apa","electricitate","gaze","termoficare","internet","evacuare-gunoi-menajer"],hooks={onFirstTimeSubscribe:function(e){var r=e.put;predefinite.map(function(t){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(t)];case 1:return e.sent(),[2]}})})})}},Serviciu=Object.freeze({__proto__:null,fields:fields$9,predefinite:predefinite,hooks:hooks}),Tranzactie=Object.freeze({__proto__:null}),fields$a={name:{required:!0,primary:!0,showInList:"primary",value:function(e){return e.activeDoc.name}},contact:{type:"contactFields",excludeFrom:"addForm",value:function(e){return e.activeDoc.contact}},rol:{required:!0,excludeFrom:[],value:function(e){return e.activeDoc.rol}},preferinte:{type:"object",excludeFrom:[]}},methods$2={UPDATEAZA:function(r){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){switch(e.label){case 0:return Object.keys(r).forEach(function(e){t[e]=r[e]}),[4,this.save()];case 1:return e.sent(),[2]}})})}},hooks$1={onFirstTimeSubscribe:function(e){var t=e.put;e.dispatch;return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,t({name:"Administrator",rol:"admin"})];case 1:return e.sent(),[2]}})})}},settings={online:{campuri:[{id:"parola",required:!1,encrypted:!0},{id:"social",required:!1,encrypted:!0}]}},Utilizator=Object.freeze({__proto__:null,fields:fields$a,hooks:hooks$1,methods:methods$2,settings:settings});exports.Lodger=Lodger,exports.notify=notify,exports.taxonomies=taxonomies;
